import{r as _,c as h,o as V,a as i,b as d,d as e,F as I,e as M,f as A,w as S,g as D,v as O,n as k,t as u,h as N,i as q}from"./vue-DIsLCQsJ.js";import{M as B}from"./markdown-BMSQkwth.js";import{g as E,a as R,i as z,b as X,c as $,s as W,d as G,e as J,f as Q,o as Y,q as Z,h as ee,j as te,k as se,l as x,m as oe,n as ne,p as ae}from"./firebase-D--XAbFQ.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const v of a.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&m(v)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function m(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const le={apiKey:"ï¼ˆWeb API Keyï¼‰",authDomain:"ï¼ˆyour-project-idï¼‰.firebaseapp.com",projectId:"ï¼ˆyour-project-idï¼‰",appId:"ï¼ˆyour app idï¼‰"},b=E().length?R():z(le),P=X(b),f=$(b);console.log("[firebase] projectId=",b.options.projectId," apiKey=",String(b.options.apiKey).slice(0,8)+"...");async function re(){await W(f,J);try{if(f.currentUser)return f.currentUser;const l=await G(f);return console.log("[anon] ok uid=",l.user?.uid),l.user}catch(l){throw console.error("[anon] error code=",l?.code," message=",l?.message,l),alert("åŒ¿åã‚µã‚¤ãƒ³ã‚¤ãƒ³å¤±æ•—: "+(l?.code||"unknown")),l}}const ie={class:"layout-pc"},de={class:"sidenav"},ce={class:"sidenav-inner"},ue={"aria-label":"ã‚µã‚¤ãƒ‰ãƒŠãƒ“"},pe={class:"nav-list"},me=["onClick","aria-current"],ve={class:"nav-text"},fe={class:"content"},ge={class:"panel"},he=["innerHTML"],ye={key:1,class:"loading"},_e={class:"sidebar"},be={class:"pad"},we={class:"hint"},Ae={class:"row"},ke=["disabled"],Ce={class:"card list"},Le={class:"posts"},Ie={class:"meta"},Me={class:"name"},Se={class:"time"},De=["onClick"],Oe=["textContent"],Ne={key:0,class:"empty"},j=500,K=10,xe={__name:"App",setup(l){new B({breaks:!0});const p=_(""),r=_(""),m=_([]),o=h(()=>r.value.length),a=h(()=>r.value?r.value.split(/\r\n|\r|\n/).length:0),v=h(()=>o.value>j),C=h(()=>a.value>K),L=h(()=>!!r.value.trim()&&!v.value&&!C.value),w=Q(P,"messages"),c=_(null);V(async()=>{console.log("[mounted] start");const n=await re();c.value=n,console.log("[ensureAnonLogin] uid =",c.value?.uid),Y(f,s=>{c.value=s,console.log("[onAuthStateChanged] uid =",s?.uid)}),window._auth=f,window._me=c;const t=Z(w,ee("created_at","desc"));te(t,s=>{m.value=s.docs.map(y=>{const g=y.data(),U=g.created_at?.toDate?g.created_at.toDate():new Date;return{id:y.id,name:g.name||"åç„¡ã—",text:g.text||"",at:U.toLocaleString(),uid:g.uid??null}}),console.log("[onSnapshot] first=",m.value[0])}),console.log("[mounted] done")});function F(){const n=r.value.trim(),t=p.value.trim()||"åç„¡ã—";L.value&&oe(w,{name:t,text:n,created_at:ae(),uid:c.value?.uid??null}).then(()=>{r.value="",console.log("[addDoc] ok, uid=",c.value?.uid)}).catch(s=>{console.error("[addDoc] error",s)})}async function H(n){try{console.log("[delete] try id=",n),await x(ne(P,"messages",n)),console.log("[delete] ok id=",n)}catch(t){console.error("[delete] error",t),alert("å‰Šé™¤ã«å¤±æ•—ã—ãŸã‹ã‚‚ã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ã­ã€‚")}}async function T(){if(!confirm("å…¨æŠ•ç¨¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"))return;const n=await se(w);for(const t of n.docs)await x(t.ref)}return(n,t)=>(d(),i("div",ie,[e("aside",de,[e("div",ce,[t[3]||(t[3]=e("div",{class:"logo"},"MENU",-1)),e("nav",ue,[e("ul",pe,[(d(!0),i(I,null,M(n.topics,s=>(d(),i("li",{key:s.id},[e("a",{href:"#",class:k(["nav-link",{active:s.id===n.selectedId}]),onClick:S(y=>n.selectedId=s.id,["prevent"]),"aria-current":s.id===n.selectedId?"page":void 0},[t[2]||(t[2]=e("span",{class:"dot","aria-hidden":"true"},null,-1)),e("span",ve,u(s.title),1)],10,me)]))),128))])])])]),e("main",fe,[t[4]||(t[4]=e("h2",{class:"title"},"â™ â™¡â™¦â™§ RoRãƒ¡ãƒ³ãƒãƒ¼ã‚µã‚¤ãƒˆ â™ â™¡â™¦â™§",-1)),t[5]||(t[5]=e("p",{class:"lead"},[A("ã“ã“ã§ã¯ãƒ¡ãƒ³ãƒãƒ¼å‘ã‘ã« "),e("strong",null,"ãƒ«ãƒ¼ãƒ«"),A(" ã‚„ "),e("strong",null,"ãƒã‚¦ãƒã‚¦"),A(" ã‚’å…±æœ‰ã—ã¾ã™ã€‚")],-1)),e("section",ge,[n.selectedHtml?(d(),i("article",{key:0,class:"md",innerHTML:n.selectedHtml},null,8,he)):(d(),i("div",ye,"èª­ã¿è¾¼ã¿ä¸­â€¦ï¼ˆcontent ãƒ•ã‚©ãƒ«ãƒ€ã« .md ã‚’ç½®ãã¨è‡ªå‹•ã§å‡ºã‚‹ã¹ï¼‰"))])]),e("aside",_e,[e("div",be,[t[10]||(t[10]=e("h3",null,"âœï¸ ãƒ¡ãƒ³ãƒãƒ¼æ›¸ãè¾¼ã¿",-1)),e("form",{onSubmit:S(F,["prevent"]),class:"card"},[t[7]||(t[7]=e("label",{class:"lbl"},"ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",-1)),D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),class:"input",placeholder:"ä¾‹ï¼šMomo56 / åç„¡ã— ãªã©"},null,512),[[O,p.value]]),t[8]||(t[8]=e("label",{class:"lbl"},"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",-1)),D(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),class:"textarea",placeholder:"è¤‡æ•°è¡ŒOKã€‚ãƒã‚¦ãƒã‚¦ã‚„é€£çµ¡äº‹é …ãªã©ã‚’ã©ã†ã",rows:"5"},null,512),[[O,r.value]]),e("div",we,[e("span",{class:k({over:v.value})},u(o.value)+"/"+u(j)+"æ–‡å­—",3),t[6]||(t[6]=e("span",null,"ãƒ»",-1)),e("span",{class:k({over:C.value})},u(a.value)+"/"+u(K)+"è¡Œ",3)]),e("div",Ae,[e("button",{class:"btn-primary",type:"submit",disabled:!L.value},"æŠ•ç¨¿",8,ke),e("button",{class:"btn-danger",type:"button",onClick:T},"å…¨å‰Šé™¤")])],32),e("div",Ce,[t[9]||(t[9]=e("h4",null,"ğŸ—‚ æœ€æ–°ã®æŠ•ç¨¿",-1)),e("ul",Le,[(d(!0),i(I,null,M(m.value,s=>(d(),i("li",{key:s.id,class:"post"},[e("div",Ie,[e("strong",Me,u(s.name||"åç„¡ã—"),1),e("small",Se,u(s.at),1),s.uid&&c.value&&s.uid===c.value.uid?(d(),i("button",{key:0,class:"btn-mini",type:"button",onClick:y=>H(s.id)}," å‰Šé™¤ ",8,De)):N("",!0)]),e("div",{class:"text",textContent:u(s.text)},null,8,Oe)]))),128)),m.value.length===0?(d(),i("li",Ne,"ã¾ã æŠ•ç¨¿ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚")):N("",!0)])]),t[11]||(t[11]=e("p",{class:"note"},"â€» Firestoreã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±æœ‰ã—ã¦ã„ã¾ã™ã€‚",-1))])])]))}};q(xe).mount("#app");
